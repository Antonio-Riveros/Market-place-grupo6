{% extends "base.html" %}

{% block content %}
<div class="profile-container">
  <div class="profile-card shadow-lg p-4 bg-white rounded-4">

    <!-- Encabezado -->
    <div class="profile-header text-center">
      {% if profile.avatar %}
        <img src="{{ profile.avatar.url }}" alt="Avatar" class="profile-avatar mb-3">
      {% else %}
        <img src="https://ui-avatars.com/api/?name={{ request.user.username }}&background=random"
             alt="Avatar" class="profile-avatar mb-3">
      {% endif %}
      <h2 class="username fw-bold">{{ request.user.username }}</h2>
      <p class="text-muted small">@{{ request.user.email }}</p>
    </div>

    <hr class="my-4">

    <!-- Biografía -->
    <div class="profile-bio mb-4">
      <h5 class="text-primary fw-semibold mb-2"><i class="fa-solid fa-user-pen me-2"></i>Sobre mí</h5>
      {% if profile.bio %}
        <p>{{ profile.bio }}</p>
      {% else %}
        <p class="text-muted fst-italic">Todavía no has agregado una biografía.</p>
      {% endif %}
    </div>

    <!-- Información de la cuenta -->
    <div class="account-info mb-4">
      <h5 class="text-primary fw-semibold mb-2"><i class="fa-solid fa-id-card me-2"></i>Información de la cuenta</h5>
      <ul class="list-unstyled text-start ms-2">
        <li><i class="fa-solid fa-envelope me-2 text-secondary"></i><strong>Email:</strong> {{ request.user.email }}</li>
        <li><i class="fa-solid fa-calendar-alt me-2 text-secondary"></i><strong>Miembro desde:</strong> {{ request.user.date_joined|date:"d/m/Y" }}</li>
        <li><i class="fa-solid fa-clock me-2 text-secondary"></i><strong>Último inicio:</strong> {{ request.user.last_login|date:"d/m/Y H:i" }}</li>
      </ul>
    </div>

    <!-- Opciones -->
    <div class="profile-actions text-center mt-4">
      <a href="{% url 'edit_profile' %}" class="btn btn-primary me-2">
        <i class="fa-solid fa-pen-to-square me-1"></i> Editar perfil
      </a>
      <a href="{% url 'password_change' %}" class="btn btn-outline-secondary me-2">
        <i class="fa-solid fa-lock me-1"></i> Cambiar contraseña
      </a>
      <form method="post" action="{% url 'account_logout' %}" class="d-inline">
        {% csrf_token %}
        <button type="submit" class="btn btn-outline-danger">
          <i class="fa-solid fa-right-from-bracket me-1"></i> Cerrar sesión
        </button>
      </form>
    </div>

  </div>
</div>

<style>
body {
  background: #f1f4f9;
}

.profile-container {
  max-width: 700px;
  margin: 60px auto;
  padding: 20px;
}

.profile-card {
  transition: all 0.3s ease;
}

.profile-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.profile-avatar {
  width: 130px;
  height: 130px;
  border-radius: 50%;
  border: 4px solid #007bff;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.profile-avatar:hover {
  transform: scale(1.05);
}

.username {
  font-size: 1.8rem;
  color: #333;
}

.profile-bio p {
  color: #555;
  line-height: 1.6;
}

.profile-actions .btn {
  border-radius: 30px;
  padding: 10px 20px;
  font-size: 0.95rem;
  transition: all 0.2s ease;
}

.profile-actions .btn:hover {
  transform: scale(1.05);
}
</style>
{% endblock %}
